<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsyncDocumentation (Composable Commerce JVM SDK 2.13.0-SNAPSHOT API)</title>
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AsyncDocumentation (Composable Commerce JVM SDK 2.13.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncDocumentation.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../io/sphere/sdk/meta/BuildInfo.html" title="class in io.sphere.sdk.meta"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/sphere/sdk/meta/AsyncDocumentation.html" target="_top">Frames</a></li>
<li><a href="AsyncDocumentation.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods.inherited.from.class.java.lang.Object">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">io.sphere.sdk.meta</div>
<h2 title="Class AsyncDocumentation" class="title">Class AsyncDocumentation</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>io.sphere.sdk.meta.AsyncDocumentation</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">AsyncDocumentation</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><!-- intro -->

 <h3 id="why">Why asynchronous</h3>

 If you don't care about threads and asynchronous computation you will probably have a slow and inefficient application.

 <p>Suppose you want to show a customer detail page with the cart items and the customer data. For doing this, you need to fetch the cart and the customer.
 Let's suppose fetching those two unrelated documents from the commercetools Composable Commerce APIs takes 100ms for each document.</p>


 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-serialWayToFetchCustomerAndCart--%s" class=code-example><pre><code class='java'>final String customerId = "customer-id";//time t=0
final Customer customer = executeSerial(CustomerByIdGet.of(customerId));//t=100ms
final Cart cart = executeSerial(CartByCustomerIdGet.of(customerId));//t=200ms
println("cart: " + cart + " customer: " + customer);
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <p>So it takes around 200ms since the requests are done one after another. By fetching them in parallel 100ms of time can be saved.</p>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-parallelWayToFetchCustomerAndCart--%s" class=code-example><pre><code class='java'>final String customerId = "customer-id";//time t=0
final CompletionStage&lt;Customer&gt; customerStage = execute(CustomerByIdGet.of(customerId));//t=1ms
//after creating the CompletionStage the Thread is freed to start further requests
final CompletionStage&lt;Cart&gt; cartStage = execute(CartByCustomerIdGet.of(customerId));//t=2ms
//collect the results
customerStage.thenAcceptBoth(cartStage, (customer, cart) -&gt; {
    //t=102ms
    println("cart: " + cart + " customer: " + customer);
});
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <p>Using futures (We use it here as synonym for <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletableFuture</code></a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a>.) can be very handy for executing code in parallel.</p>

 <p>You can use future APIs to run code in separate Threads so that the result will not be immediately available, but in the future.
 The overhead of creating a future can be lower than the <a href="https://stackoverflow.com/a/5483105">overhead of creating new Thread</a>.</p>

 <h3 id="mixing-async-and-sync">Mixing synchronous and asynchronous computations</h3>

 A lot of frameworks do not support asynchronous results but it is still possible to execute calls in parallel and then wait for computed result:

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-firstAsyncThenSync--%s" class=code-example><pre><code class='java'>final String customerId = "customer-id";//time t=0
final CompletionStage&lt;Customer&gt; customerStage = execute(CustomerByIdGet.of(customerId));//t=1ms
//after creating the CompletionStage the Thread is freed to start further requests
final CompletionStage&lt;Cart&gt; cartStage = execute(CartByCustomerIdGet.of(customerId));//t=2ms
//collect the results

final CompletionStage&lt;String&gt; resultStage = customerStage.thenCompose(customer -&gt;
    cartStage.thenApply(cart -&gt; {
        //t=102ms
        return "cart: " + cart.getCustomerId() + " customer: " + customer.getId();//do some computation
    })
);
final String result = SphereClientUtils.blockingWait(resultStage, 500, TimeUnit.MILLISECONDS);

assertThat(result).isEqualTo("cart: " + customerId + " customer: " + customerId);
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 Also for a group of commercetools Composable Commerce requests, they can be executed in parallel and then collected:

 <div id="io-sphere-sdk-meta-AsyncCollectorDemo%s" class=code-example><button type='button' style='display: none;' class='reveal-imports'>show/hide imports</button><pre class='hide code-example-imports'><code class='java'>import io.sphere.sdk.client.SphereClient;

import io.sphere.sdk.products.Product;

import io.sphere.sdk.products.commands.ProductDeleteCommand;

import java.time.Duration;

import java.util.List;

import static io.sphere.sdk.client.SphereClientUtils.blockingWaitForEachCollector;
</code></pre><pre><code class='java'>public class AsyncCollectorDemo {
    public static void demo(final SphereClient client, final List&lt;Product&gt; products) {
        final List&lt;Product&gt; deletedProducts = products.stream()
                .map(product -&gt; client.execute(ProductDeleteCommand.of(product)))
                .collect(blockingWaitForEachCollector(Duration.ofSeconds(10)));
    }
}
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncCollectorDemo.java" target="_blank">test code</a>.</pre></div>

 <!--
 <h3 id="what">What</h3>

 <ul>
     <li>monad</li>
link to Wikipedia, give monad laws

     <li>like <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util"><code>Optional</code></a> of a result value, can have a value or not, but this can change over time</li>
     <li>like <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html?is-external=true" title="class or interface in java.util"><code>Optional</code></a> of an exception, can have an exception or not, but this can change over time</li>

    <li> by default not bound to any thread pool or asynchronous job</li>

 for one value, value can be a list, but it is not a subscription like in Rx.


 <li>CompletableFuture for filling it, CompletionStage for public API (dev cannot fulfill future), methods in complectionstage also in completablefuture</li>
 <li>CompletionStage.toCompletableFuture</li>
 <li>usage is not a guarantee, that is reactive or non blocking, can still be used wrong</li>
 <li></li>
 <li></li>
 </ul> -->


 <h3 id="functional-composition">Functional Composition </h3>

 Functional composition covers transforming one future into another for the happy cases. <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(java.util.function.Function)</code></a>
 and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenCompose-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenCompose(java.util.function.Function)</code></a> will only be called if the future finishes successfully.




 <h4>ThenApply (map, function returns directly a value)</h4>
Mostly, it is easier to reason about side-effect free code. A future is monad so you do not work with the value directly,
 but you provide functions to transform the value or the exception into a new future.

To use a future for further computation, you probably need to use <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(java.util.function.Function)</code></a>.
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-thenApplyFirstDemo--%s" class=code-example><pre><code class='java'>final String customerId = "customer-id";
final CompletionStage&lt;Customer&gt; customerStage = execute(CustomerByIdGet.of(customerId));
final CompletionStage&lt;String&gt; pageStage = customerStage.thenApply(customerOption -&gt;
        "customer page " + customerOption);
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>


With <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(java.util.function.Function)</code></a> you apply a function to a stage
 if this stage completes successfully. The function is a first class member, so you can store it in a value or even make it the return type of
 a method.

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-thenApplyFirstDemoVerbose--%s" class=code-example><pre><code class='java'>final String customerId = "customer-id";
final CompletionStage&lt;Customer&gt; customerStage = execute(CustomerByIdGet.of(customerId));
//stored in a value
final Function&lt;Customer, String&gt; f = customer -&gt; "customer page " + customer;
final CompletionStage&lt;String&gt; pageStage = customerStage.thenApply(f);
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <div id="io-sphere-sdk-meta-FunctionAsReturnValueDemo%s" class=code-example><button type='button' style='display: none;' class='reveal-imports'>show/hide imports</button><pre class='hide code-example-imports'><code class='java'>import io.sphere.sdk.customers.Customer;

import io.sphere.sdk.customers.queries.CustomerByIdGet;

import java.util.concurrent.CompletionStage;

import java.util.function.Function;
</code></pre><pre><code class='java'>public class FunctionAsReturnValueDemo extends AsyncDocumentationTest {
    public static final Function&lt;Customer, String&gt; renderCustomerPage(final String title) {
        return customerOption -&gt; title + " " + customerOption;
    }

    public static void showUsage() {
        final String customerId = "customer-id";
        final CompletionStage&lt;Customer&gt; customerStage =
                execute(CustomerByIdGet.of(customerId));
        final CompletionStage&lt;String&gt; pageStage =
                customerStage.thenApply(renderCustomerPage("customer page"));
    }
}
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/FunctionAsReturnValueDemo.java" target="_blank">test code</a>.</pre></div>

 It has similar semantics like <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html?is-external=true#map-java.util.function.Function-" title="class or interface in java.util.stream"><code>Stream.map(java.util.function.Function)</code></a>.

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-functionalCompositionMapStreamExample--%s" class=code-example><pre><code class='java'>final List&lt;Person&gt; persons = asList(new Person("John", "Smith"), new Person("Michael", "Müller"));
final List&lt;String&gt; lastNames = persons.stream().map(Person::getLastName).distinct().collect(toList());
assertThat(lastNames).isEqualTo(asList("Smith", "Müller"));
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>



<h4>ThenCompose (flatMap, function returns a CompletionStage)</h4>

 Sometimes you run in situations where you create a new future inside a future.
 For example if you load a cart and want to fetch the first line item in it.


 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-shouldUseFlatMap--%s" class=code-example><pre><code class='java'>final String cartIt = "cart-id";
final CompletionStage&lt;Cart&gt; cartStage = execute(CartByIdGet.of(cartIt));
final Function&lt;Cart, CompletionStage&lt;ProductProjection&gt;&gt; f = cart -&gt; {
    final LineItem lineItem = cart.getLineItems().get(0);
    final String productId = lineItem.getProductId();
    final CompletionStage&lt;ProductProjection&gt; product =
            execute(ProductProjectionByIdGet.of(productId, CURRENT));
    return product;
};
// CompletionStage of CompletionStage, urgs!
final CompletionStage&lt;CompletionStage&lt;ProductProjection&gt;&gt; productStageStage =
        cartStage.thenApply(f);
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 Instead of creating an unmaintainable <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a> of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a>,
 you can use <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenCompose-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenCompose(java.util.function.Function)</code></a>.

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-flatMapFirstDemo--%s" class=code-example><pre><code class='java'>final String cartIt = "cart-id";
final CompletionStage&lt;Cart&gt; cartStage = execute(CartByIdGet.of(cartIt));
final Function&lt;Cart, CompletionStage&lt;ProductProjection&gt;&gt; f = cart -&gt; {
    final LineItem lineItem = cart.getLineItems().get(0);
    final String productId = lineItem.getProductId();
    final CompletionStage&lt;ProductProjection&gt; product =
            execute(ProductProjectionByIdGet.of(productId, CURRENT));
    return product;
};
//no nested CompletionStage, by using thenCompose instead of thenApply
final CompletionStage&lt;ProductProjection&gt; productStageStage = cartStage.thenCompose(f);
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 It has similar semantics like <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html?is-external=true#flatMap-java.util.function.Function-" title="class or interface in java.util.stream"><code>Stream.flatMap(java.util.function.Function)</code></a>.

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-functionalCompositionFlatMapStreamExample--%s" class=code-example><pre><code class='java'>final List&lt;Person&gt; persons = asList(new Person("John", "Smith"), new Person("Michael", "Müller"));
//map causes Stream of Stream
final Stream&lt;Stream&lt;Integer&gt;&gt; streamStream = persons.stream()
        .map(person -&gt; person.getLastName().chars().boxed());
//flatMap
final Stream&lt;Integer&gt; simpleStream = persons.stream()
        .flatMap(person -&gt; person.getLastName().chars().boxed());
assertThat(simpleStream.collect(toList()))
        .isEqualTo(asList(83, 109, 105, 116, 104, 77, 252, 108, 108, 101, 114));
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>



 <!--



 map,flatmap mit future future
 only if no error occurred


 thread pool


 2 futures with thenCompose, after another

 thenCombine for when both completed


 -->

 <h3 id="callbacks">Callbacks</h3>


 For some occasions you do not want to transform a value, but to perform a side effect task, like logging a value or an error,
 writing sth. into a file or sending a response for a request.

 <div id="io-sphere-sdk-meta-AsyncDocumentationCallbackTest-loggingCallbackExample--%s" class=code-example><pre><code class='java'>final CompletionStage&lt;String&gt; stage = getFuture();

//when completed, access only value if present
stage.thenAcceptAsync(value -&gt; logger.info("Fetched successfully " + value));

//when completed, access value or error, one of them is null
final CompletionStage&lt;String&gt; resultLikeOriginalStage = stage.whenCompleteAsync((nullableValue, nullableError) -&gt; {
    if (nullableValue != null) {
        logger.info("Fetched successfully " + nullableValue);
    } else {
        logger.error("Did not fetch successfully.", nullableError);
    }
});
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationCallbackTest.java" target="_blank">test code</a>.</pre></div>

 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#whenComplete-java.util.function.BiConsumer-" title="class or interface in java.util.concurrent"><code>CompletionStage.whenComplete(java.util.function.BiConsumer)</code></a> keeps the result as it is and performs side-effects,
 so it is nice to log in between and then map the stage to a new one:

 <div id="io-sphere-sdk-meta-AsyncDocumentationCallbackTest-whenCompleteAsyncDemo--%s" class=code-example><pre><code class='java'>final CompletionStage&lt;Response&gt; stage = getResponse();
final CompletionStage&lt;String&gt; contentTypeStage = stage
        .whenComplete((nullableResponse, e) -&gt; logger.debug("response: " + nullableResponse))
        .thenApply(response -&gt; response.getContentType());
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationCallbackTest.java" target="_blank">test code</a>.</pre></div>

 <h3 id="creation">Creation and filling</h3>

 <h4>Creation of a successful future</h4>

 A future can be created as fulfilled immediately:

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-createImmediatelyFulfilledFuture--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture("result");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 Also future can be fulfilled later:

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-createFulfilledFuture--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();

assertThat(future.isDone()).isFalse();
assertThat(future.isCompletedExceptionally()).isFalse();

final String resultOfAComputation = "result";
future.complete(resultOfAComputation);

assertThat(future.isDone()).isTrue();
assertThat(future.isCompletedExceptionally()).isFalse();
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 For the immediately fulfilled future an SDK utility method also exists:

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-createImmediatelyFulfilledFutureShortcut--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = CompletableFutureUtils.successful("result");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <h4>Creation of a failed future</h4>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-createFailedFuture--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();

assertThat(future.isDone()).isFalse();
assertThat(future.isCompletedExceptionally()).isFalse();

final Throwable throwable = new Exception();
future.completeExceptionally(throwable);

assertThat(future.isDone()).isTrue();
assertThat(future.isCompletedExceptionally()).isTrue();
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <p>Using an SDK shortcut:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-createFailedFutureShortcut--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = CompletableFutureUtils.failed(new Exception());
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>


 <p>If you complete a future, it is possible that the same Thread is used for functional compositions or executing callbacks. If you don't want this, the calls need to use the methods which end with "Async".</p>
 <!--

 fulfilling in another thread

 normally only creator of future should be able to fulfill it, CompletionStage for outside access

difference Stage,Future
 promise,reedemable promise
 scala future, scala promise
 show threads used, fuer map/thenApply

 once it is filled, should be immutable


 static methods of completable future

 not null

 -->



 <h3 id="blocking">Blocking Access and Immediate Access</h3>

<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a> does not provide immediate or blocking access to its value or error,
 but it is possible, but not encouraged to transform the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a> with <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#toCompletableFuture--" title="class or interface in java.util.concurrent"><code>CompletionStage.toCompletableFuture()</code></a> to a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletableFuture</code></a>.</p>


 <h4>Blocking access</h4>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-futureJoinDemo--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture("hi");
final String actual = future.join();
assertThat(actual).isEqualTo("hi");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <h4>Access with timeout</h4>
 <p>Future completes in time:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-futureGetTimeoutDemo--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture("hi");
final String actual = future.get(12, TimeUnit.MILLISECONDS);
assertThat(actual).isEqualTo("hi");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <p>future does not complete in time:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-futureGetTimeoutDemoWithActualTimeout--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; futureThatTakesTooLong = new CompletableFuture&lt;&gt;();
Assert.assertThrows(TimeoutException.class, () -&gt; futureThatTakesTooLong.get(12, TimeUnit.MILLISECONDS));
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <h4>Access for the impatient</h4>
 <p>Future completed:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-demoGetNowCompleted--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future =
        CompletableFuture.completedFuture("success in time");
final String value = future.getNow("alternative");
assertThat(value).isEqualTo("success in time");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <p>Future did not yet complete:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-demoGetNow--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; incompleteFuture = new CompletableFuture&lt;&gt;();
final String value = incompleteFuture.getNow("alternative");
assertThat(value).isEqualTo("alternative");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

<p>Workaround if the value should be lazy computed:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-testOrElseGet--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; incompleteFuture = new CompletableFuture&lt;&gt;();
final String value = CompletableFutureUtils //SDK utils class
        .orElseGet(incompleteFuture, () -&gt; "ALTERNATIVE".toLowerCase());
assertThat(value).isEqualTo("alternative");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 See <a href="../../../../io/sphere/sdk/utils/CompletableFutureUtils.html#orElseGet-java.util.concurrent.CompletionStage-java.util.function.Supplier-"><code>CompletableFutureUtils.orElseGet(CompletionStage, Supplier)</code></a>.

 <p>Workaround if exception should be thrown:</p>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-testOrElseThrow--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; incompleteFuture = new CompletableFuture&lt;&gt;();
Assert.assertThrows(WhatEverException.class, () -&gt; CompletableFutureUtils //SDK utils class
            .orElseThrow(incompleteFuture, WhatEverException::new));
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>
 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-testOrElseThrowHappyPath--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future =
        CompletableFuture.completedFuture("success in time");
final String value = CompletableFutureUtils //SDK utils class
        .orElseThrow(future, () -&gt; new WhatEverException());
assertThat(value).isEqualTo("success in time");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 See <a href="../../../../io/sphere/sdk/utils/CompletableFutureUtils.html#orElseThrow-java.util.concurrent.CompletionStage-java.util.function.Supplier-"><code>CompletableFutureUtils.orElseThrow(CompletionStage, Supplier)</code></a> .
 <br>
 <br>
<h4>Summary of Blocking Access and Immediate Access methods </h4>

 <table class="custom">
 <caption>Blocking Access and Immediate Access methods of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletableFuture</code></a></caption>
 <tbody>
 <tr>
 <td>&nbsp;</td>
 <td>
 <p>future.join()</p>
 </td>
 <td>
 <p>future.get()</p>
 </td>
 <td>
 <p>future.get(12, TimeUnit.MILLISECONDS)</p>
 </td>
 <td>
 <p>future.getNow(&quot;default&quot;)</p>
 </td>
 </tr>
 <tr>
 <td>
 <p>returns value if present</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>
 <p>x</p>
 </td>
 </tr>
 <tr>
 <td>
 <p>blocks potentially forever</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>&nbsp;</td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td>
 <p>uses alternative, if value not present</p>
 </td>
 <td>&nbsp;</td>
 <td>&nbsp;</td>
 <td>&nbsp;</td>
 <td>
 <p>x</p>
 </td>
 </tr>
 <tr>
 <td>
 <p>throws TimeoutException</p>
 </td>
 <td>&nbsp;</td>
 <td>&nbsp;</td>
 <td>
 <p>x</p>
 </td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td>
 <p>throws CompletionException</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>&nbsp;</td>
 <td>&nbsp;</td>
 <td>
 <p>x</p>
 </td>
 </tr>
 <tr>
 <td>
 <p>throws ExecutionException</p>
 </td>
 <td>&nbsp;</td>
 <td>
 <p>x</p>
 </td>
 <td>
 <p>x</p>
 </td>
 <td>&nbsp;</td>
 </tr>
 <tr>
 <td>
 <p>throws only unchecked Exceptions</p>
 </td>
 <td>x</td>
 <td>
 <p>&nbsp;</p>
 </td>
 <td>
 <p>&nbsp;</p>
 </td>
 <td>x</td>
 </tr>
 </tbody>
 </table>


 <!-- CompletionStage.toCompletableFuture().join()

 T      get()
 Waits if necessary for this future to complete, and then returns its result.
 T      get(long timeout, TimeUnit unit)
 Waits if necessary for at most the given time for this future to complete, and then returns its result, if available.
 T      getNow(T valueIfAbsent)
 T      join()


 occurring exception of join and what they mean
 CompletableFuture.getNow(valueIfAbsent)

 orElseThrow
 orElseGet wie bei Optional

 -->

 <h3 id="java-util-function">Java Functions</h3>


Since Java 8, the JDK provides <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Lambda Expressions</a>
 and <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">Method References</a>.



 <br><br>

 <table class="custom">
 <caption>Important <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html?is-external=true" title="class or interface in java.lang"><code>FunctionalInterface</code></a>s</caption>
 <tbody>
 <tr>
 <td>&nbsp;</td>
 <td>number of arguments</td>
 <td>behavior</td>
 <td>checked Exception</td>
 <td>purpose</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html?is-external=true" title="class or interface in java.util.function"><code>Function</code></a>&lt;T,R&gt;</td>
 <td>1</td>
 <td>create value</td>
 <td>&nbsp;</td>
 <td>transforms one value into another</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/BiFunction.html?is-external=true" title="class or interface in java.util.function"><code>BiFunction</code></a>&lt;T,U,R&gt;</td>
 <td>2</td>
 <td>create value</td>
 <td>&nbsp;</td>
 <td>transforms two values into another</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html?is-external=true" title="class or interface in java.util.function"><code>Consumer</code></a>&lt;T&gt;</td>
 <td>1</td>
 <td>side-effects</td>
 <td>&nbsp;</td>
 <td>side effect for one value</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/BiConsumer.html?is-external=true" title="class or interface in java.util.function"><code>BiConsumer</code></a>&lt;T,U&gt;</td>
 <td>2</td>
 <td>side-effects</td>
 <td>&nbsp;</td>
 <td>side effect for two values</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html?is-external=true" title="class or interface in java.util.function"><code>Supplier</code></a>&lt;T&gt;</td>
 <td>0</td>
 <td>create value</td>
 <td>&nbsp;</td>
 <td>on-demand creation of a value</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent"><code>Callable</code></a>&lt;V&gt;</td>
 <td>0</td>
 <td>create value</td>
 <td>x</td>
 <td>like Supplier but throws Exception</td>
 </tr>
 <tr>
 <td><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a></td>
 <td>0</td>
 <td>side-effects</td>
 <td>&nbsp;</td>
 <td>task which causes side-effects</td>
 </tr>
 </tbody>
 </table>



 <!--

 function vs. method block, first class member, but method reference

 -->


 <h3 id="threads">Threads and the Trinity</h3>

 <p>Which Thread is used for functional composition and callbacks depends on the method.
 For <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(Function)</code></a>,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenAccept-java.util.function.Consumer-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenAccept(Consumer)</code></a> ,
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#handle-java.util.function.BiFunction-" title="class or interface in java.util.concurrent"><code>CompletionStage.handle(BiFunction)</code></a> etc. exist three variants:</p>

 <ol>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(Function)</code></a>, no suffix, if the future is not yet completed, the the thread which calls
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true#complete-T-" title="class or interface in java.util.concurrent"><code>CompletableFuture.complete(Object)</code></a> is used to apply the function, if the future is completed, the thread which calls <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(Function)</code></a> is used.
 So this method is discouraged if you use actors or tend to block threads.</li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApplyAsync-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApplyAsync(Function)</code></a> with suffix "Async" calls the function inside a Thread of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ForkJoinPool.html?is-external=true#commonPool--" title="class or interface in java.util.concurrent"><code>ForkJoinPool.commonPool()</code></a>. So you are better protected against deadlocks.</li>
  <li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApplyAsync-java.util.function.Function-java.util.concurrent.Executor-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApplyAsync(Function, Executor)</code></a>  with suffix "Async" and additional <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent"><code>Executor</code></a> parameter calls the function inside a Thread pool you specify as second parameter.</li>
 </ol>


 <h3 id="error-handling">Error Handling</h3>

<p>If an exception occurs with the computation, it should be propagated to the future with <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true#completeExceptionally-java.lang.Throwable-" title="class or interface in java.util.concurrent"><code>CompletableFuture.completeExceptionally(Throwable)</code></a>, but only once in the lifetime of the future.
 As a result the following try catch block does not make sense, since the error is inside the future which is most likely computed in another Thread:</p>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-wrongWayOfErrorHandling--%s" class=code-example><pre><code class='java'>final Service service = new Service();
try {
    final CompletionStage&lt;String&gt; result = service.execute();
} catch (final WhatEverException e) {
    //catch block does not make sense
}
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>


<h4>Recover from a failure without a new CompletionStage</h4>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-simpleRecover--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();
future.completeExceptionally(new WhatEverException());
final CompletableFuture&lt;String&gt; hardenedFuture = future.exceptionally(e -&gt; "a default value");
assertThat(hardenedFuture.join()).isEqualTo("a default value");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

<h4>Recover from a failure with producing a new CompletionStage</h4>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-simpleRecover--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = new CompletableFuture&lt;&gt;();
future.completeExceptionally(new WhatEverException());
final CompletableFuture&lt;String&gt; hardenedFuture = future.exceptionally(e -&gt; "a default value");
assertThat(hardenedFuture.join()).isEqualTo("a default value");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <h4>Handle</h4>
<a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#exceptionally-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.exceptionally(Function)</code></a> is like applying <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#thenApply-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.thenApply(Function)</code></a> and then <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true#exceptionally-java.util.function.Function-" title="class or interface in java.util.concurrent"><code>CompletionStage.exceptionally(Function)</code></a>:

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-handleLikeExceptionallyAndThenApply--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; future = CompletableFuture.completedFuture("hi");

final CompletableFuture&lt;String&gt; viaHandle = future.handle((nullableValue, nullableError) -&gt;
                nullableValue != null ? nullableValue.toUpperCase() : "DEFAULT"
);

final CompletableFuture&lt;String&gt; viaThenApply = future
        .thenApply(value -&gt; value.toUpperCase()).exceptionally(e -&gt; "DEFAULT");

assertThat(viaHandle.join()).isEqualTo(viaThenApply.join()).isEqualTo("HI");
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

<p>You can use the exceptions to give error specific text to the user:</p>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-exceptionallyWithExceptionTypes--%s" class=code-example><pre><code class='java'>final CompletionStage&lt;String&gt; stage = new Service().execute();
final CompletionStage&lt;String&gt; result = stage.exceptionally(e -&gt; {
    if (e instanceof PriceChangedException) {
        return "price changed, is now " + ((PriceChangedException) e).getCurrentPrice();
    } else if (e instanceof OutOfStockException) {
        return "out of stock";
    } else {
        return "oops";
    }
});
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <p>But you do not need to cover all problems:</p>

 <div id="io-sphere-sdk-meta-AsyncDocumentationTest-exceptionallyWithExceptionTypesButUncoveredPart--%s" class=code-example><pre><code class='java'>final CompletableFuture&lt;String&gt; stage = CompletableFutureUtils.failed(new WhatEverException());
final Function&lt;Throwable, String&gt; f = e -&gt; {
    if (e instanceof PriceChangedException) {
        return "price changed, is now " + ((PriceChangedException) e).getCurrentPrice();
    } else if (e instanceof OutOfStockException) {
        return "out of stock";
    } else if (e instanceof RuntimeException) {
        throw (RuntimeException) e;
    } else {
        //wrap with CompletionException it checked exceptions
        //it works out with future.get and future.join
        throw new CompletionException(e);
    }
};
final CompletableFuture&lt;String&gt; hardened = stage.exceptionally(f);
trying(() -&gt; hardened.join(), e -&gt; assertExceptionAndCause(e, CompletionException.class, WhatEverException.class));

//now with a checked exception
final CompletableFuture&lt;String&gt; withChecked = CompletableFutureUtils.failed(new EvilCheckedException());
trying(() -&gt; withChecked.join(), e -&gt; assertExceptionAndCause(e, CompletionException.class, EvilCheckedException.class));
trying(() -&gt; withChecked.get(), e -&gt; assertExceptionAndCause(e, ExecutionException.class, EvilCheckedException.class));
</code><p>See the <a href="https://github.com/commercetools/commercetools-jvm-sdk/blob/master/commercetools-internal-docs/src/test/java/io/sphere/sdk/meta/AsyncDocumentationTest.java" target="_blank">test code</a>.</pre></div>

 <!--



 handle for recover, ergebnis kann noch mal angepasst werden im nächsten stage
 handle kann auch optional zuruückgeben

 https://stackoverflow.com/questions/25338376/completablefuture-withfallback-handle-only-some-errors

 side effect, log error

 timeout with exception
 timeout with defaultvalue
 https://stackoverflow.com/questions/23575067/timeout-with-default-value-in-java-8-completablefuture

 rethrow exception if not matching

 -->

 <!--

 <h3 id="ask-pattern">Ask pattern</h3>

 <code>&lt;pre&gt;
 public CompletableFuture&lt;T&gt; performTask() {
     final CompletableFuture&lt;T&gt; future = new CompletableFuture&lt;&gt;();
     //do here stuff async/non-blocking and return the future to the client
     return future;
 }

 &lt;/pre&gt;</code>

 -->

 <h3 id="multi-future">Working with multiple futures</h3>

 <!--
 2
 or list

 applyToEither to use the fasted of 2

 acceptEither
 -->


 <h3 id="traps">Traps</h3>
 <!--
 new CompletableFuture() and call future.get() and nether fill it, will block forever

 try catch mit ask pattern

 thenCompine and thenCompose, IDE may suggest the wrong one, sound similar

 toCompletableFuture.join(), especially in flatMap context


 -->
 <h3 id="advanced-examples">Advanced Examples</h3>

 <!--

    1000 listener for 1 future


 -->

 <h3 id="summary">Summary</h3>




 <table class="custom">
 <caption><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletionStage</code></a> vs. <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html?is-external=true" title="class or interface in java.util.concurrent"><code>CompletableFuture</code></a></caption>
 <tbody>
 <tr>
 <td>&nbsp;</td>
 <td>
 CompletionStage
 </td>
 <td>
 CompletableFuture
 </td>
 </tr>
 <tr>
 <td>
 type
 </td>
 <td>
 interface
 </td>
 <td>
 concrete class
 </td>
 </tr>


 <tr>
 <td>
 implements CompletionStage
 </td>
 <td>
 x
 </td>
 <td>
 x
 </td>
 </tr>

 <tr>
 <td>functional composition
 </td>
 <td>
 x
 </td>
 <td>
 x
 </td>
 </tr>


 <tr>
 <td>
 implements Future interface
 </td>
 <td>&nbsp;</td>
 <td>
 x
 </td>
 </tr>
 <tr>
 <td>
 can be filled with value or exception
 </td>
 <td>&nbsp;</td>
 <td>
 x
 </td>
 </tr>
 <tr>
 <td>
 can be cancelled
 </td>
 <td>&nbsp;</td>
 <td>
 x
 </td>
 </tr>
 <tr>
 <td>
 can check if completed
 </td>
 <td>&nbsp;</td>
 <td>
 x
 </td>
 </tr>
 <tr>
 <td>
 blocking usage directly possible
 </td>
 <td>&nbsp;</td>
 <td>
 x
 </td>
 </tr>
 <tr>
 <td>
 provides static methods for creation
 </td>
 <td>&nbsp;</td>
 <td>
 x
 </td>
 </tr>
 </tbody>
 </table>

 <br><br>

 <table class="custom centered">
 <caption>CompletionStage methods</caption>
 <tbody>
 <tr>
 <td>&nbsp;</td>

 <td> value </td>

 <td>
effect
 </td>

 <td>
 Function param
 </td>

 <td>
 Consumer param
 </td>

 <td>
 Runnable param
 </td>

 <td>
 maps value
 </td>

 <td>
 maps error
 </td>

 <td>
 or
 </td>

 <td>
 and
 </td>

 <td>
 Scala Future
 </td>

 <td>
 Play F.Promise
 </td>

 </tr>

 <tr>
 <td>
 thenApply
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 map
 </td>

 <td>
 map
 </td>

 </tr>

 <tr>
 <td>
 thenCompose
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 flatMap
 </td>

 <td>
 flatMap
 </td>

 </tr>

 <tr>
 <td>
 thenAccept
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
onSuccess
 </td>

 <td>
onSuccess
 </td>


 </tr>

 <tr>
 <td>
 thenRun
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>


 </tr>

 <tr>
 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>


 </tr>

 <tr>
 <td>
 exceptionally
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 recover
 </td>

 <td>
 recover
 </td>


 </tr>

 <tr>
 <td>
 handle
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 andThen
 </td>

 <td>&nbsp;</td>


 </tr>

 <tr>
 <td>
 whenComplete
 </td>

 <td>
 x
 </td>

 <td>x</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>


 </tr>

 <tr>
 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 </tr>

 <tr>
 <td>
 acceptEither
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>


 </tr>

 <tr>
 <td>
 thenAcceptBoth
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>
 zip
 </td>

 <td>
 zip
 </td>

 </tr>

 <tr>
 <td>
 applyToEither
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 fallbackTo
 </td>

 <td>
 fallbackTo
 </td>


 </tr>

 <tr>
 <td>
 thenCombine
 </td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 </tr>

 <tr>
 <td>
 runAfterEither
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>


 </tr>

 <tr>
 <td>
 runAfterBoth
 </td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>

 <td>
 x
 </td>

 <td>&nbsp;</td>

 <td>&nbsp;</td>


 </tr>
 </tbody>
 </table>


 <h3 id="further-topics">Further Topics</h3>
 <!--
 skipable


 CompletableFuture.obtrudeValue, normally value will not be overridden
 -->





 <!-- Tabelle mit methoden und eigenschaften

 java.util.function funktionen vorstellen und wie man sie erweitern kann, triconsumer @FunctionalInterface
 -->

 <h3 id="further-sources">Further read and sources</h3>

<ul>
 <li><a href="https://docs.oracle.com/javase/8/docs/api/index.html?java/util/concurrent/CompletableFuture.html">CompletableFuture</a></li>
 <li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html">CompletionStage</a></li>
 <li><a href="https://www.nurkiewicz.com/2013/05/java-8-definitive-guide-to.html">Java 8: Definitive guide to CompletableFuture</a></li>
 <li><a href="https://www.nurkiewicz.com/2013/05/java-8-completablefuture-in-action.html">Java 8: CompletableFuture in action</a></li>
 </ul></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsyncDocumentation.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../io/sphere/sdk/meta/BuildInfo.html" title="class in io.sphere.sdk.meta"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?io/sphere/sdk/meta/AsyncDocumentation.html" target="_top">Frames</a></li>
<li><a href="AsyncDocumentation.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods.inherited.from.class.java.lang.Object">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/default.min.css'>                             <script src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js'></script>                             <script>hljs.initHighlightingOnLoad();</script>                             <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>                             <span id='custom-javascripts'></span>                             <script src='../../../../resources/javascripts/main.js'></script>                             <link rel='stylesheet' href='../../../../resources/stylesheets/main.css'></small></p>
</body>
</html>